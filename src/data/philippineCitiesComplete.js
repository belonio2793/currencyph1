// Comprehensive list of Philippine cities with coordinates
export const PHILIPPINE_CITIES_COMPLETE = [
  { name: 'Abuyog', latitude: 10.3069, longitude: 124.8119, region: 'Leyte' },
  { name: 'Alaminos', latitude: 15.7969, longitude: 120.1819, region: 'Pangasinan' },
  { name: 'Alcala', latitude: 11.3572, longitude: 124.9947, region: 'Ceres' },
  { name: 'Angeles', latitude: 15.8726, longitude: 120.5895, region: 'Pampanga' },
  { name: 'Antipolo', latitude: 14.5797, longitude: 121.1486, region: 'Rizal' },
  { name: 'Aroroy', latitude: 12.2936, longitude: 124.0072, region: 'Masbate' },
  { name: 'Bacolod', latitude: 10.3910, longitude: 123.0273, region: 'Negros Occidental' },
  { name: 'Bacoor', latitude: 14.4176, longitude: 120.7618, region: 'Cavite' },
  { name: 'Bago', latitude: 10.3519, longitude: 123.0680, region: 'Negros Occidental' },
  { name: 'Bais', latitude: 9.6878, longitude: 123.3711, region: 'Negros Oriental' },
  { name: 'Balanga', latitude: 14.7922, longitude: 120.5058, region: 'Bataan' },
  { name: 'Baliuag', latitude: 14.7642, longitude: 120.9272, region: 'Bulacan' },
  { name: 'Bangued', latitude: 17.5447, longitude: 121.4875, region: 'Abra' },
  { name: 'Bansalan', latitude: 6.5594, longitude: 125.2786, region: 'Davao del Sur' },
  { name: 'Bantayan', latitude: 11.0314, longitude: 123.7319, region: 'Cebu' },
  { name: 'Bataan', latitude: 14.6409, longitude: 120.4761, region: 'Bataan' },
  { name: 'Batac', latitude: 17.4497, longitude: 120.2764, region: 'Ilocos Norte' },
  { name: 'Batangas City', latitude: 13.7565, longitude: 121.1933, region: 'Batangas' },
  { name: 'Bayambang', latitude: 16.0975, longitude: 121.3364, region: 'Pangasinan' },
  { name: 'Bayawan', latitude: 9.1147, longitude: 123.1564, region: 'Negros Oriental' },
  { name: 'Baybay', latitude: 10.6478, longitude: 124.7475, region: 'Leyte' },
  { name: 'Bayugan', latitude: 8.7123, longitude: 125.7642, region: 'Agusan del Sur' },
  { name: 'Bi単an', latitude: 14.3164, longitude: 121.0300, region: 'Laguna' },
  { name: 'Bislig', latitude: 8.2047, longitude: 125.8522, region: 'Surigao del Sur' },
  { name: 'Bocaue', latitude: 14.8167, longitude: 120.9167, region: 'Bulacan' },
  { name: 'Bogo', latitude: 10.9961, longitude: 124.0069, region: 'Cebu' },
  { name: 'Boracay', latitude: 11.9673, longitude: 121.9247, region: 'Aklan' },
  { name: 'Borongan', latitude: 11.5833, longitude: 124.6167, region: 'Eastern Samar' },
  { name: 'Butuan', latitude: 8.9452, longitude: 125.5347, region: 'Agusan del Norte' },
  { name: 'Cabadbaran', latitude: 9.0508, longitude: 125.4547, region: 'Agusan del Norte' },
  { name: 'Cabanatuan', latitude: 15.4857, longitude: 121.1214, region: 'Nueva Ecija' },
  { name: 'Cabuyao', latitude: 14.2628, longitude: 121.0364, region: 'Laguna' },
  { name: 'Cadiz', latitude: 10.3906, longitude: 123.2733, region: 'Negros Occidental' },
  { name: 'Cagayan de Oro', latitude: 8.4866, longitude: 124.6527, region: 'Misamis Oriental' },
  { name: 'Calamba', latitude: 14.2097, longitude: 121.1734, region: 'Laguna' },
  { name: 'Calapan', latitude: 13.2117, longitude: 121.1878, region: 'Oriental Mindoro' },
  { name: 'Calbayog', latitude: 12.0708, longitude: 124.6072, region: 'Samar' },
  { name: 'Caloocan', latitude: 14.6414, longitude: 120.9801, region: 'NCR' },
  { name: 'Camiling', latitude: 15.9833, longitude: 120.5500, region: 'Tarlac' },
  { name: 'Canlaon', latitude: 10.4061, longitude: 123.1253, region: 'Negros Oriental' },
  { name: 'Caoayan', latitude: 16.5911, longitude: 120.5308, region: 'Pangasinan' },
  { name: 'Capiz', latitude: 11.6333, longitude: 122.1333, region: 'Capiz' },
  { name: 'Caraga', latitude: 9.1333, longitude: 125.6333, region: 'Davao Oriental' },
  { name: 'Carmona', latitude: 14.2831, longitude: 121.0197, region: 'Cavite' },
  { name: 'Catbalogan', latitude: 11.9833, longitude: 124.6167, region: 'Samar' },
  { name: 'Cauayan', latitude: 16.9706, longitude: 121.7869, region: 'Isabela' },
  { name: 'Cavite City', latitude: 14.3097, longitude: 120.8794, region: 'Cavite' },
  { name: 'Cebu City', latitude: 10.3157, longitude: 123.8854, region: 'Cebu' },
  { name: 'Cotabato City', latitude: 7.2064, longitude: 124.2533, region: 'Maguindanao' },
  { name: 'Dagupan', latitude: 16.0439, longitude: 120.3167, region: 'Pangasinan' },
  { name: 'Danao', latitude: 10.1969, longitude: 123.9447, region: 'Cebu' },
  { name: 'Dapitan', latitude: 8.6428, longitude: 123.6394, region: 'Zamboanga del Norte' },
  { name: 'Daraga', latitude: 13.1814, longitude: 123.7325, region: 'Albay' },
  { name: 'Dasmari単as', latitude: 14.2890, longitude: 120.9500, region: 'Cavite' },
  { name: 'Davao City', latitude: 7.0731, longitude: 125.6121, region: 'Davao del Sur' },
  { name: 'Davao del Norte', latitude: 7.5, longitude: 125.5, region: 'Davao del Norte' },
  { name: 'Davao del Sur', latitude: 6.9, longitude: 125.5, region: 'Davao del Sur' },
  { name: 'Davao Oriental', latitude: 7.0, longitude: 126.2, region: 'Davao Oriental' },
  { name: 'Dipolog', latitude: 8.6333, longitude: 123.3167, region: 'Zamboanga del Norte' },
  { name: 'Dumaguete', latitude: 9.3031, longitude: 123.3084, region: 'Negros Oriental' },
  { name: 'General Santos', latitude: 6.1133, longitude: 124.2136, region: 'South Cotabato' },
  { name: 'General Trias', latitude: 14.2567, longitude: 120.8342, region: 'Cavite' },
  { name: 'Gingoog', latitude: 9.1333, longitude: 124.6500, region: 'Misamis Oriental' },
  { name: 'Guihulngan', latitude: 9.2908, longitude: 123.2858, region: 'Negros Oriental' },
  { name: 'Himamaylan', latitude: 10.2744, longitude: 122.9917, region: 'Negros Occidental' },
  { name: 'Ilagan', latitude: 16.8003, longitude: 121.9131, region: 'Isabela' },
  { name: 'Iligan', latitude: 8.2342, longitude: 124.2163, region: 'Lanao del Norte' },
  { name: 'Iloilo City', latitude: 10.6960, longitude: 122.5631, region: 'Iloilo' },
  { name: 'Imus', latitude: 14.3018, longitude: 120.8742, region: 'Cavite' },
  { name: 'Isabela', latitude: 16.8042, longitude: 121.7778, region: 'Isabela' },
  { name: 'Isulan', latitude: 6.7506, longitude: 124.7411, region: 'Sultan Kudarat' },
  { name: 'Kabankalan', latitude: 10.2444, longitude: 122.8656, region: 'Negros Occidental' },
  { name: 'Kidapawan', latitude: 7.3972, longitude: 125.4994, region: 'Cotabato' },
  { name: 'Koronadal', latitude: 6.5197, longitude: 124.7834, region: 'South Cotabato' },
  { name: 'La Carlota', latitude: 10.4028, longitude: 123.3889, region: 'Negros Occidental' },
  { name: 'Laoag', latitude: 18.1930, longitude: 120.5892, region: 'Ilocos Norte' },
  { name: 'Lapu-Lapu', latitude: 10.3186, longitude: 123.9658, region: 'Cebu' },
  { name: 'Las Pi単as', latitude: 14.3569, longitude: 120.9234, region: 'NCR' },
  { name: 'Laoang', latitude: 12.9333, longitude: 124.1833, region: 'Northern Samar' },
  { name: 'Legazpi', latitude: 13.1503, longitude: 123.7433, region: 'Albay' },
  { name: 'Ligao', latitude: 13.2122, longitude: 123.7433, region: 'Albay' },
  { name: 'Limay', latitude: 14.7428, longitude: 120.6167, region: 'Bataan' },
  { name: 'Lucena', latitude: 14.1867, longitude: 121.6267, region: 'Quezon' },
  { name: 'Maasin', latitude: 9.7006, longitude: 124.1328, region: 'Southern Leyte' },
  { name: 'Mabalacat', latitude: 15.3256, longitude: 120.5986, region: 'Pampanga' },
  { name: 'Malabon', latitude: 14.6548, longitude: 120.8289, region: 'NCR' },
  { name: 'Malaybalay', latitude: 8.1486, longitude: 125.0061, region: 'Bukidnon' },
  { name: 'Malolos', latitude: 14.8406, longitude: 120.7900, region: 'Bulacan' },
  { name: 'Mandaluyong', latitude: 14.5736, longitude: 121.0165, region: 'NCR' },
  { name: 'Mandaue', latitude: 10.4064, longitude: 123.9897, region: 'Cebu' },
  { name: 'Manila', latitude: 14.5995, longitude: 120.9842, region: 'NCR' },
  { name: 'Marawi', latitude: 7.9925, longitude: 124.2839, region: 'Lanao del Sur' },
  { name: 'Marilao', latitude: 14.8878, longitude: 120.8686, region: 'Bulacan' },
  { name: 'Masbate City', latitude: 12.3786, longitude: 123.6339, region: 'Masbate' },
  { name: 'Mati', latitude: 6.9581, longitude: 126.2100, region: 'Davao Oriental' },
  { name: 'Meycauayan', latitude: 14.7642, longitude: 120.9272, region: 'Bulacan' },
  { name: 'Muntinlupa', latitude: 14.3814, longitude: 121.0340, region: 'NCR' },
  { name: 'Naga (Camarines Sur)', latitude: 13.6225, longitude: 123.8883, region: 'Camarines Sur' },
  { name: 'Navotas', latitude: 14.6667, longitude: 120.8500, region: 'NCR' },
  { name: 'Olongapo', latitude: 14.8444, longitude: 120.2844, region: 'Zambales' },
  { name: 'Ormoc', latitude: 11.0095, longitude: 124.6086, region: 'Leyte' },
  { name: 'Oroquieta', latitude: 8.6744, longitude: 123.8144, region: 'Misamis Occidental' },
  { name: 'Ozamiz', latitude: 8.8089, longitude: 123.8508, region: 'Misamis Occidental' },
  { name: 'Pagadian', latitude: 7.8172, longitude: 123.4328, region: 'Zamboanga del Sur' },
  { name: 'Palo', latitude: 11.2167, longitude: 124.6000, region: 'Leyte' },
  { name: 'Para単aque', latitude: 14.3520, longitude: 120.9842, region: 'NCR' },
  { name: 'Pasay', latitude: 14.5486, longitude: 121.0000, region: 'NCR' },
  { name: 'Pasig', latitude: 14.5794, longitude: 121.0583, region: 'NCR' },
  { name: 'Passi', latitude: 11.2539, longitude: 122.6789, region: 'Iloilo' },
  { name: 'Puerto Princesa', latitude: 10.1519, longitude: 118.8289, region: 'Palawan' },
  { name: 'Quezon City', latitude: 14.6349, longitude: 121.0388, region: 'NCR' },
  { name: 'Roxas', latitude: 11.5881, longitude: 122.7528, region: 'Capiz' },
  { name: 'Sagay', latitude: 10.5481, longitude: 123.4189, region: 'Negros Occidental' },
  { name: 'Samal', latitude: 7.1336, longitude: 125.7275, region: 'Davao del Sur' },
  { name: 'San Carlos (Negros Occidental)', latitude: 10.6708, longitude: 123.6092, region: 'Negros Occidental' },
  { name: 'San Carlos (Pangasinan)', latitude: 15.9175, longitude: 120.6875, region: 'Pangasinan' },
  { name: 'San Fernando (La Union)', latitude: 16.6069, longitude: 120.3139, region: 'La Union' },
  { name: 'San Fernando (Pampanga)', latitude: 15.0269, longitude: 120.6892, region: 'Pampanga' },
  { name: 'San Jose (Antique)', latitude: 10.7094, longitude: 122.1644, region: 'Antique' },
  { name: 'San Jose del Monte', latitude: 14.8647, longitude: 121.0581, region: 'Bulacan' },
  { name: 'San Juan', latitude: 14.5567, longitude: 121.0167, region: 'NCR' },
  { name: 'San Pablo', latitude: 14.0628, longitude: 121.3167, region: 'Laguna' },
  { name: 'San Pedro', latitude: 14.3422, longitude: 121.0139, region: 'Laguna' },
  { name: 'Santiago', latitude: 16.7142, longitude: 121.5514, region: 'Isabela' },
  { name: 'Silay', latitude: 10.6608, longitude: 123.7364, region: 'Negros Occidental' },
  { name: 'Sipalay', latitude: 10.0878, longitude: 123.1489, region: 'Negros Occidental' },
  { name: 'Sorsogon City', latitude: 12.9747, longitude: 124.0061, region: 'Sorsogon' },
  { name: 'Surigao City', latitude: 9.7674, longitude: 125.5092, region: 'Surigao del Norte' },
  { name: 'Tabaco', latitude: 13.4300, longitude: 123.7461, region: 'Albay' },
  { name: 'Tabuk', latitude: 17.4458, longitude: 121.4239, region: 'Kalinga' },
  { name: 'Tacurong', latitude: 6.7511, longitude: 124.7956, region: 'Sultan Kudarat' },
  { name: 'Tagaytay', latitude: 14.1167, longitude: 120.9333, region: 'Cavite' },
  { name: 'Tagbilaran', latitude: 9.6411, longitude: 123.8561, region: 'Bohol' },
  { name: 'Taguig', latitude: 14.5326, longitude: 121.0585, region: 'NCR' },
  { name: 'Tacloban', latitude: 11.2833, longitude: 124.7000, region: 'Leyte' },
  { name: 'Talisay (Cebu)', latitude: 10.2833, longitude: 123.9667, region: 'Cebu' },
  { name: 'Talisay (Negros Occidental)', latitude: 10.2833, longitude: 123.2333, region: 'Negros Occidental' },
  { name: 'Tanjay', latitude: 9.4547, longitude: 123.1850, region: 'Negros Oriental' },
  { name: 'Tarlac City', latitude: 15.4833, longitude: 120.6000, region: 'Tarlac' },
  { name: 'Tayabas', latitude: 14.0500, longitude: 121.6111, region: 'Quezon' },
  { name: 'Toledo', latitude: 10.4675, longitude: 123.6325, region: 'Cebu' },
  { name: 'Trece Martires', latitude: 14.3247, longitude: 120.8456, region: 'Cavite' },
  { name: 'Tuguegarao', latitude: 17.6416, longitude: 121.7339, region: 'Cagayan' },
  { name: 'Urdaneta', latitude: 16.2450, longitude: 120.5667, region: 'Pangasinan' },
  { name: 'Valencia', latitude: 10.1672, longitude: 124.8844, region: 'Bukidnon' },
  { name: 'Valenzuela', latitude: 14.7637, longitude: 120.5659, region: 'NCR' },
  { name: 'Victorias', latitude: 10.6289, longitude: 123.5517, region: 'Negros Occidental' },
  { name: 'Vigan', latitude: 16.6160, longitude: 120.3842, region: 'Ilocos Sur' },
  { name: 'Virac', latitude: 13.5817, longitude: 124.1908, region: 'Catanduanes' },
  { name: 'Zamboanga City', latitude: 6.9271, longitude: 122.0724, region: 'Zamboanga del Sur' },
  { name: 'Baguio', latitude: 16.4023, longitude: 120.5960, region: 'Benguet' },
  { name: 'Bohol', latitude: 9.5, longitude: 123.9, region: 'Bohol' },
  { name: 'Coron', latitude: 12.1818, longitude: 120.2000, region: 'Palawan' },
  { name: 'El Nido', latitude: 11.1883, longitude: 119.4133, region: 'Palawan' },
  { name: 'Makati', latitude: 14.5547, longitude: 121.0244, region: 'NCR' },
  { name: 'Palawan', latitude: 9.7, longitude: 118.7, region: 'Palawan' },
  { name: 'Siargao', latitude: 9.8533, longitude: 126.0133, region: 'Surigao del Norte' }
];

/**
 * Find the closest city based on user coordinates
 */
export function findClosestCity(userLat, userLng) {
  let closestCity = null;
  let closestDistance = Infinity;

  PHILIPPINE_CITIES_COMPLETE.forEach((city) => {
    const distance = calculateDistance(userLat, userLng, city.latitude, city.longitude);
    if (distance < closestDistance) {
      closestDistance = distance;
      closestCity = city;
    }
  });

  // Return closest city or default to Metro Manila if distance is extreme
  if (closestCity && closestDistance < 500) {
    return closestCity;
  }

  // Fallback to Metro Manila
  return PHILIPPINE_CITIES_COMPLETE.find((c) => c.name === 'Manila') || PHILIPPINE_CITIES_COMPLETE[0];
}

/**
 * Calculate distance between two coordinates in kilometers
 */
export function calculateDistance(lat1, lng1, lat2, lng2) {
  const R = 6371; // Earth's radius in km
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLng = ((lng2 - lng1) * Math.PI) / 180;
  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos((lat1 * Math.PI) / 180) * Math.cos((lat2 * Math.PI) / 180) * Math.sin(dLng / 2) * Math.sin(dLng / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c;
}
